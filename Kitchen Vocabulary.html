<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kitchen Vocabulary â€“ Picture Flashcards</title>
<style>
  :root{
    --bg:#FDFBED; --ink:#222; --accent:#8A0000; --card:#fff; --ink-soft:#444;
    --card-min:180px; --card-ratio:180/220; --card-radius:16px; --card-shadow:0 3px 10px rgba(0,0,0,.06);
    --fs-front:24px; --fs-tag:12px; --fs-index:12px; --fs-hint:11px;
  }
  @media (min-width:768px){
    :root{
      --card-min: clamp(120px, 17vw, 180px);
      --fs-front: clamp(18px, 1.8vw, 24px);
      --fs-index: clamp(10px, .9vw, 12px);
      --fs-hint:  clamp(9px,  .8vw, 11px);
    }
  }
  *,*::before,*::after{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:"MS Reference Sans Serif", system-ui, Arial, sans-serif}

  header{max-width:1100px;margin:24px auto 0;padding:0 16px}
  h1{letter-spacing:.5px;font-weight:600;font-size:25px;margin:0 0 4px;color:#000}
  p.lead{margin:.25rem 0 1rem;color:var(--ink-soft)}

  .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0 18px}
  .btn{appearance:none;border:1px solid var(--accent);background:transparent;color:var(--accent);padding:10px 14px;border-radius:999px;font-weight:600;cursor:pointer;transition:transform .2s}
  .btn:hover{transform:scale(1.05)}
  .btn.active{background:var(--accent);color:#fff}
  .search{flex:1;min-width:200px}
  .search input{width:100%;padding:10px 12px;border:1px solid #c7b9b9;border-radius:12px}

  /* Original mute button styling (icon loads after first user interaction) */
  #muteBtn{
    width:38px;height:38px;margin-left:10px;border:1px solid var(--accent);
    background:transparent center/22px 22px no-repeat;border-radius:999px;
    font-weight:600;cursor:pointer;display:none
  }
  #muteBtn:hover{transform:scale(1.1)}

  .grid{
    max-width:1100px;margin:0 auto;padding:0 16px 40px;
    display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--card-min),1fr));gap:16px;
  }
  .card{perspective:1000px;cursor:pointer}
  .inner{position:relative;width:100%;aspect-ratio:var(--card-ratio);transform-style:preserve-3d;transition:transform .5s}
  .card.flipped .inner{transform:rotateY(180deg)}

  .face{
    position:absolute;inset:0;border:1px solid rgba(139,0,2,.3);border-radius:var(--card-radius);
    background:var(--card);box-shadow:var(--card-shadow);
    display:flex;flex-direction:column;align-items:center;justify-content:center;padding:14px;backface-visibility:hidden
  }
  .front .word{font-size:var(--fs-front);font-weight:700;text-align:center;line-height:1.2}
  .front .tag{margin-top:8px;font-size:var(--fs-tag);color:var(--ink-soft)}
  .back{transform:rotateY(180deg);overflow:hidden;padding:0}
  .imgWrap{position:relative;inset:0;width:100%;height:100%}
  .imgWrap img{width:100%;height:100%;object-fit:cover;display:block}

  .index{position:absolute;top:8px;left:10px;font-size:var(--fs-index);color:var(--ink-soft);z-index:2;background:rgba(255,255,255,.7);padding:2px 6px;border-radius:8px}
  .hint{position:absolute;bottom:10px;right:12px;font-size:var(--fs-hint);color:var(--ink-soft)}
  .sr{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

  /* Speaker button (inline SVG so it always renders) */
  .speakBtn{
    position:absolute;top:8px;right:10px;width:34px;height:34px;
    border:1px solid var(--accent);border-radius:999px;background:#fff;
    color:var(--accent);cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.1);
    display:flex;align-items:center;justify-content:center
  }
  .speakBtn:hover{transform:scale(1.08)}
  .speakBtn svg{width:18px;height:18px;display:block}
</style>
</head>
<body>
  <header>
    <h1>Kitchen Vocabulary â€“ Picture Flashcards</h1>
    <p class="lead">Click / tap a card to flip. Tap ðŸ”Š to hear the word (British English).</p>
    <div class="toolbar">
      <button class="btn" id="resetOrder">Aâ€“Z</button>
      <button class="btn" id="shuffle">Shuffle</button>
      <button class="btn" id="flipAll">Flip All</button>
      <label class="search">
        <span class="sr">Search words</span>
        <input id="q" type="search" placeholder="Filter by wordâ€¦" />
      </label>
      <button id="muteBtn" aria-label="Mute/Unmute" title="Mute/Unmute"></button>
    </div>
  </header>

  <main class="grid" id="grid" aria-live="polite"></main>

<script>
/* === DATA: your vocab with exact image URLs === */
const CARDS = [
  { en:'Microwave', src:'https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcRTOhNFo2FU2lZbauIb4LMeHSEojMyFC7M-x7ZhH6ISmYjmQgjKkopeCJmq7o1QWRLOofOgRs-46R9aOHyPSAP_yWMe9TcbwBehVPZmzaz7mjP1JpXxE-xp' },
  { en:'Toaster', src:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQjb7myBnJVRN30xYohtvb1FPPIkdAshdz8aw&s' },
  { en:'Kettle', src:'https://cuisinart.com.au/sites/cuisinart/media/products/cpk-18bxa/black-kettle.png' },
  { en:'Oven', src:'https://hartandcoappliances.com.au/img/containers/products/8/c/wfep9717dd_03_med-8cb4b28c8578a75f99647716ef8a7847.jpg/2a1fcfee5713fdeb7b65d24c0ddcd0ba/wfep9717dd_03_med-8cb4b28c8578a75f99647716ef8a7847.jpg' },
  { en:'Stove', src:'https://www.bigw.com.au/medias/sys_master/images/images/h8a/h43/100349472636958.jpg' },
  { en:'Blender', src:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgxfbI7OC-vISlN6hPPeqfU_cEHK_4WCOnkQ&s' },
  { en:'Fridge', src:'https://www.townappliance.com/cdn/shop/articles/Bm0SrO8A4Qv1EKnJJsanbChAFKLnkbYo1661523178_b576f749-5cd6-4285-b011-05c5ec17e4e5.jpg?v=1749549800' },
  { en:'Freezer', src:'https://www.whirlpool.com/content/dam/business-unit/whirlpoolv2/en-us/marketing-content/site-assets/page-content/oc-articles/guide-to-the-parts-of-a-freezer/freezer-guide_Thumbnail.jpg' },
  { en:'Sink', src:'https://www.arova.com.au/cdn/shop/files/alto-685mm-stainless-steel-kitchen-laundry-sink-single-bowl-top-undermount-sinks-arova-332935.jpg?v=1747385981&width=1267' },
  { en:'Drawer', src:'https://www.deancabinetry.com/wp-content/uploads/2022/05/3-drawer-and-4-drawer-1.jpg' },
  { en:'Cupboard', src:'https://www.nakedkitchens.com/image/cache/catalog/naked-kitchens/slideshow/raynham/Raynham-4-1500x1500.webp' },
  { en:'knife', src:'https://images.immediate.co.uk/production/volatile/sites/30/2020/08/1._chef_knife-bb260f9.jpg?quality=90&fit=700,350' },
  { en:'grater', src:'https://www.ikea.com/au/en/images/products/idealisk-grater-stainless-steel__0713134_pe729282_s5.jpg?f=s' },
  { en:'peeler', src:'https://m.media-amazon.com/images/I/61p4EhExkSL.jpg' },
  { en:'whisk', src:'https://media.nisbets.com/asset/core/prodimage/large_new/df117_1.jpg' },
  { en:'mixing bowl', src:'https://www.harrisscarfe.com.au/medias/BP562593-nc.jpg-SPOTWF-productHero?context=bWFzdGVyfGltYWdlc3wzMzYwMXxpbWFnZS9qcGVnfGltYWdlcy9oMjAvaGZkLzE1NzA1MzQ5MDYyNjg2L0JQNTYyNTkzLW5jLmpwZ19TUE9UV0ZfcHJvZHVjdEhlcm98YjI1YzYzYzY1ZTEzNDI4MjZiNGU2Njk0MmEyZjAxZTViYThiYTVmNzc1NGY0MGI0MTg4OTU5NjI3YmM0ZWMxNg' },
  { en:'Ladle', src:'https://m.media-amazon.com/images/I/61VvpCMtfLL.jpg' },
  { en:'colander/strainer', src:'https://relishcateringhire.co.uk/wp-content/uploads/2023/11/Colander.jpg' },
  { en:'tongs', src:'https://m.media-amazon.com/images/I/51PUCSovndL._UF894,1000_QL80_.jpg' },
  { en:'egg lifter/spatula', src:'https://i.ebayimg.com/images/g/hu8AAOSwipdarapz/s-l1200.jpg' },
  { en:'chopping board', src:'https://m.media-amazon.com/images/I/71x84Vg3EmL._UF894,1000_QL80_.jpg' },
  { en:'funnel', src:'https://m.media-amazon.com/images/I/51oy3OeFNIL.jpg' },
  { en:'apron', src:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRDywM10QZOfro03Rio76CiLGOco8_W3WUxAw&s' },
  { en:'jug', src:'https://attachments.qcc.com.au/products/images_large/573216.jpg?r=1582032608' },
  { en:'Potato masher', src:'https://m.media-amazon.com/images/I/51rKrGHQIqL._UF894,1000_QL80_.jpg' },
  { en:'tray', src:'https://media.teaching.com.au/uploads/tam4008/zoom/tam4008_melamine-tray-white-38-x-24cm.webp' },
  { en:'frying pan', src:'https://agaaustralia.com.au/wp-content/uploads/2022/03/AGA-Black-Iron-28cm-Fry-Pan.jpg' },
  { en:'pot', src:'https://assets.manufactum.de/p/025/025438/25438_02.jpg/pot-stainless-steel.jpg' },
  { en:'saucepan', src:'https://www.ikea.com/au/en/images/products/ikea-365-saucepan-stainless-steel__1006177_pe825762_s5.jpg' },
  { en:'measuring cup', src:'https://cdn11.bigcommerce.com/s-21zzsq2bal/images/stencil/1280x1280/products/1759/8494/48263_a__63088.1706893389.jpg?c=1?imbypass=on' },
  { en:'oven mitt', src:'https://www.ikea.com/au/en/images/products/rinnig-oven-glove-grey__0918260_pe786433_s5.jpg' }
];

/* === AUDIO: SFX + BG music (mobile-safe unlock) === */
const uiClick = new Audio("https://cdn.pixabay.com/download/audio/2024/04/21/audio_1b8d3bcd3d.mp3?filename=click-buttons-ui-menu-sounds-effects-button-7-203601.mp3");
const flipAllSound = new Audio("https://cdn.pixabay.com/download/audio/2025/07/30/audio_b3087a581e.mp3");
const bgMusic = new Audio("https://cdn.pixabay.com/download/audio/2025/06/13/audio_cd802a7e4b.mp3");

[uiClick, flipAllSound, bgMusic].forEach(a => { a.preload = 'auto'; a.crossOrigin = 'anonymous'; });
uiClick.volume = 0.4;
flipAllSound.volume = 0.3;
bgMusic.loop = true;
bgMusic.volume = 0.1;

let musicStarted = false;
const muteBtn = document.getElementById('muteBtn');
const ICON_MUTE   = "https://schredder222.github.io/Assets/Mute.svg";
const ICON_UNMUTE = "https://schredder222.github.io/Assets/Unmute.svg";
function setMuteIcon(){ muteBtn.style.backgroundImage = `url(${bgMusic.muted ? ICON_MUTE : ICON_UNMUTE})`; }

/* iOS/Android audio unlock helpers */
let audioCtx;
function unlockAudioContext(){
  try{
    if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    if(audioCtx.state === 'suspended') audioCtx.resume();
  }catch{}
}

let speechPrimed = false;
function primeSpeech(){
  if(speechPrimed || !('speechSynthesis' in window)) return;
  const u = new SpeechSynthesisUtterance(' ');
  u.volume = 0; u.lang = 'en-GB';
  speechSynthesis.speak(u);
  speechPrimed = true;
}

/* Start bg music exactly once, inside a user gesture */
async function startAudioOnFirstGesture(){
  if(musicStarted) return;
  musicStarted = true;
  unlockAudioContext();
  primeSpeech();
  try { await bgMusic.play(); } catch(e) { /* user can tap later to start */ }
  muteBtn.style.display = 'inline-block';
  setMuteIcon();
}

/* Listen to multiple gesture types (covers iOS/older Android) */
['pointerdown','touchend','click','keydown'].forEach(evt =>
  document.addEventListener(evt, startAudioOnFirstGesture, { once:true, passive:true })
);

/* === PRONUNCIATION (British English) === */
let voiceGB = null;
function pickGBVoice(){
  const vs = speechSynthesis.getVoices();
  voiceGB = vs.find(v => /en-GB/i.test(v.lang) || /United Kingdom|British English/i.test(v.name)) || null;
}
if ('speechSynthesis' in window){
  pickGBVoice();
  window.speechSynthesis.onvoiceschanged = pickGBVoice;
}
function speakWord(word){
  if(!('speechSynthesis' in window)) return;
  const text = (word||'').replace(/\s*\(.*?\)\s*/g,'').replace(/\//g,' or ').trim();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'en-GB';
  if(voiceGB) u.voice = voiceGB;
  u.rate = 0.95; u.pitch = 1.0; u.volume = 1.0;
  if (speechSynthesis.speaking || speechSynthesis.pending) speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* === UI wiring === */
const grid = document.getElementById('grid');
const search = document.getElementById('q');
const shuffleBtn = document.getElementById('shuffle');
const resetBtn = document.getElementById('resetOrder');
const flipAllBtn = document.getElementById('flipAll');
let flippedAll = false;

function svgFallback(word){
  const svg =
`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#ffffff"/><stop offset="1" stop-color="#f3efe1"/></linearGradient></defs>
  <rect width="100%" height="100%" fill="url(#g)"/>
  <g font-family="Arial, Helvetica, sans-serif" fill="#8A0000" text-anchor="middle">
    <text x="400" y="310" font-size="56" font-weight="700">${(word||'').replace(/&/g,'&amp;')}</text>
  </g>
</svg>`;
  return "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(svg);
}

function speakerButtonHTML(){
  return `
    <button class="speakBtn" aria-label="Play pronunciation" title="Play pronunciation">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 10v4h4l5 4V6L7 10H3z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <path d="M16 8c1.5 1.5 1.5 4.5 0 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M19 5c3 3 3 9 0 12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>`;
}

function createCard(item, i){
  const card = document.createElement('article');
  card.className = 'card'; card.tabIndex = 0; card.setAttribute('role','button');
  card.setAttribute('aria-label', `${item.en}: show picture`);

  const inner = document.createElement('div'); inner.className = 'inner';

  const front = document.createElement('div');
  front.className = 'face front';
  front.innerHTML = `
    <span class="index">#${String(i+1).padStart(2,'0')}</span>
    ${speakerButtonHTML()}
    <div class="word">${item.en}</div>
    <div class="tag">English</div>
    <div class="hint">Click / tap to flip</div>
  `;

  const back = document.createElement('div');
  back.className = 'face back';
  back.innerHTML = `
    ${speakerButtonHTML()}
    <span class="index">#${String(i+1).padStart(2,'0')}</span>
    <div class="imgWrap">
      <img alt="Image: ${item.en}" loading="lazy" decoding="async" referrerpolicy="no-referrer">
    </div>
  `;

  inner.appendChild(front); inner.appendChild(back); card.appendChild(inner);

  const img = back.querySelector('img');
  img.src = item.src || svgFallback(item.en);
  img.onerror = ()=>{ img.src = svgFallback(item.en); };

  function handleFlip(){
    if(card.classList.contains('flipped')){ card.classList.remove('flipped'); }
    else { document.querySelectorAll('.card').forEach(c => c.classList.remove('flipped')); card.classList.add('flipped'); }
    startAudioOnFirstGesture();
  }
  card.addEventListener('click', handleFlip);
  card.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); handleFlip(); } });

  card.querySelectorAll('.speakBtn').forEach(btn=>{
    btn.addEventListener('click', (e)=>{ e.stopPropagation(); startAudioOnFirstGesture(); speakWord(item.en); });
  });

  return card;
}

function render(list){
  grid.innerHTML = '';
  list.forEach((item,i)=> grid.appendChild(createCard(item,i)));
}

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

/* Initial render (Aâ€“Z) */
let base = CARDS.slice().sort((a,b)=>a.en.localeCompare(b.en));
let current = base.slice();
render(current);
resetBtn.classList.add('active');

/* Toolbar handlers */
function playUIClick(){ uiClick.currentTime = 0; uiClick.play(); }

shuffleBtn.addEventListener('click', ()=>{
  startAudioOnFirstGesture(); playUIClick();
  current = shuffle(current);
  flippedAll = false; flipAllBtn.textContent = 'Flip All';
  render(current);
  shuffleBtn.classList.add('active'); resetBtn.classList.remove('active');
});

resetBtn.addEventListener('click', ()=>{
  startAudioOnFirstGesture(); playUIClick();
  current = base.slice();
  flippedAll = false; flipAllBtn.textContent = 'Flip All';
  render(current);
  resetBtn.classList.add('active'); shuffleBtn.classList.remove('active');
});

flipAllBtn.addEventListener('click', ()=>{
  startAudioOnFirstGesture();
  flipAllSound.currentTime = 0; flipAllSound.play();
  const cards = Array.from(document.querySelectorAll('.card'));
  flippedAll = !flippedAll;
  cards.forEach(c=> c.classList.toggle('flipped', flippedAll));
  flipAllBtn.textContent = flippedAll ? 'Unflip All' : 'Flip All';
});

search.addEventListener('input', (e)=>{
  const q = e.target.value.toLowerCase().trim();
  const filtered = current.filter(it => it.en.toLowerCase().includes(q));
  render(filtered);
});

/* Mute / unmute (original behaviour) */
muteBtn.addEventListener('click', ()=>{
  startAudioOnFirstGesture();
  uiClick.currentTime = 0; uiClick.play();
  bgMusic.muted = !bgMusic.muted;
  setMuteIcon();
});
</script>
</body>
</html>
